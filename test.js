const Discord = require('discord.js');
const fs = require('fs');
const client = new Discord.Client();

var prefix = "%"
client.on('message', message => {
  if (!message.content.startsWith(prefix)) return;
  var args = message.content.split(' ').slice(1);
  var argresult = args.join(' ');
  if (message.author.id !== "476577762396864512") return;

  
  if (message.content.startsWith(prefix + 'setwatch')) {
  client.user.setActivity(argresult, {type: 'WATCHING'})
     console.log('test' + argresult);
    message.channel.sendMessage(`Watch Now: **${argresult}`)
} 

 
  if (message.content.startsWith(prefix + 'setlis')) {
  client.user.setActivity(argresult, {type: 'LISTENING'})
     console.log('test' + argresult);
    message.channel.sendMessage(`LISTENING Now: **${argresult}`)
} 


if (message.content.startsWith(prefix + 'setname')) {
  client.user.setUsername(argresult).then
      message.channel.sendMessage(`Username Changed To **${argresult}**`)
  return message.reply("You Can change the username 2 times per hour");
} 

if (message.content.startsWith(prefix + 'setavatar')) {
  client.user.setAvatar(argresult);
   message.channel.sendMessage(`Avatar Changed Successfully To **${argresult}**`);
}

if (message.content.startsWith(prefix + 'setT')) {
  client.user.setGame(argresult, "https://www.twitch.tv/peery13");
     console.log('test' + argresult);
    message.channel.sendMessage(`Streaming: **${argresult}`)
} 
if (message.content.startsWith(prefix + 'setgame')) {
  client.user.setGame(argresult);
     console.log('test' + argresult);
    message.channel.sendMessage(`Playing: **${argresult}`)
} 



});



client.on('ready', () => {
  console.log(`Welcome To Sharks ${client.user.tag}!`);
});


client.on('guildMemberAdd', member => {
    let channel = member.guild.channels.find('name', 'welcome');
    let memberavatar = member.user.avatarURL
      if (!channel) return;
    let embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setThumbnail(memberavatar)
        .addField('ğŸ½ | name :  ',`${member}`)
        .addField('ğŸ“¢ | Ø§Ø·Ù„Ù‚ Ù…Ù† Ø¯Ø®Ù„' , `Welcome to the server, ${member}`)
        .addField('ğŸ†” | user :', "**[" + `${member.id}` + "]**" )
                .addField('â¡| Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù…',`${member.guild.memberCount}`)
               
                  .addField("Name:",`<@` + `${member.id}` + `>`, true)
                     
                                     .addField(' Ø§Ù„Ù€Ø³ÙŠØ±ÙØ±', `${member.guild.name}`,true)
                                       
     .setFooter(`${member.guild.name}`)
        .setTimestamp()
   
      channel.sendEmbed(embed);
    });
    
    client.on('guildMemberRemove', member => {
        var embed = new Discord.RichEmbed()
        .setAuthor(member.user.username, member.user.avatarURL)
        .setThumbnail(member.user.avatarURL)
        .setTitle(`Ø¨Ø³ Ø¨Ø¹Ø±Ù ÙˆÙŠÙ† Ø±Ø­ØªØŸØŸØŸ âœ‹:skin-tone-1: ğŸ˜”`)
        .setDescription(`Ù…Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…Ù‡ ØªØ´Ø±ÙÙ†Ø§ Ø¨Ùƒ âœ‹:skin-tone-1: ğŸ˜” `)
        .addField('ğŸ‘¤   ØªØ¨Ù‚ÙŠ',`**[ ${member.guild.memberCount} ]**`,true)
        .setColor('RED')
        .setFooter(`====ÙˆÙ„ÙƒÙ… Ù…Ù†ÙˆØ± Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§ØªÙ…Ù†Ø§ Ù„Ùƒ Ø§Ù„Ø§Ø³ØªÙ…ØªØ§Ø¹====`, 'https://cdn.discordapp.com/attachments/397818254439219217/399292026782351381/shy.png')
    
    var channel =member.guild.channels.find('name', 'welcome')
    if (!channel) return;
    channel.send({embed : embed});
    });

client.login('NTIyMjI0NzAwNjAxMDA4MTM0.DvH3iQ.0vHb2cO5mCMnKtJqG3YU6BNhOOY');
